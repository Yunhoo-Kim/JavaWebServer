<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
    <!--<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"
            integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb"
            crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"
            integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css"
          integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">

    <!--<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">-->


    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.0/Chart.min.js"></script>
    <!--<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"-->
    <!--integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"-->
    <!--crossorigin="anonymous"></script>-->
</head>
<body>
<nav class="navbar navbar-toggleable-md navbar-light bg-faded">
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
            data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false"
            aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" href="#">Collog</a>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav">
            <a class="nav-item nav-link active collog-nav" view="dashboard-view" href="javascript:void(0);"
               id="dashboard">DashBoard <span class="sr-only">(current)</span></a>
            <a class="nav-item nav-link collog-nav" view="dashboard-add-view" href="javascript:void(0);"
               id="add_dashboard">Add DashBoard</a>
            <a class="nav-item nav-link collog-nav" href="javascript:void(0);" view="query-view" id="query">Query</a>
            <!--<a class="nav-item nav-link disabled" href="javascript:void(0);">Disabled</a>-->
        </div>
    </div>
</nav>
<div class="col-md-12 collog-view" id="dashboard-view">
    <div class="col-md-8 col-offset-md-2">
        <canvas id="myChart" width="400" height="400"></canvas>
        <canvas id="myChart2" width="400" height="400"></canvas>
    </div>
</div>

<div class="col-md-12 collog-view" id="dashboard-add-view">
</div>

<div class="col-md-12 collog-view" id="query-view">
    <div class="col-md-12">
        <select id="searchable-field">
        </select>
        <input type="text" id="search-value">
        <button id="search-btn">검색!</button>
    </div>
    <table class="col-md-12 table" id="personDataTable" style="font-size: 15px;">
        <tr id="query-table-row" style="font-size: 18px;">
            <!--<th>Id</th>-->
            <!--<th>First Name</th>-->
            <!--<th>Last Name</th>-->
        </tr>

    </table>
</div>

<script>
/**
*
*/
$(".collog-nav").click(function(){
var view = $(this).attr("view");
$(".collog-view").each(function(){
$(this).css("display","none");
});
$(".collog-nav").each(function(){
$(this).removeClass("active");
});
$(this).addClass("active");
$("#"+view).css("display","block");

});

var ctx = document.getElementById("myChart").getContext('2d');
var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"],
        datasets: [{
            label: '# of Votes',
            data: [12, 19, 3, 5, 2, 3],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255,99,132,1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:true
                }
            }]
        }
    }
});

var ctx1 = document.getElementById("myChart2").getContext('2d');


var myDoughnutChart = new Chart(ctx1, {
	type: 'doughnut',
	data: {
		datasets: [{data:[10,50]}],
		labels: ["arc","asrc"]
	},
	options: {
        
    }
});

var searchable_fields = [];
$.ajax({
    url: 'http://localhost:8885/master/meta/',
    type: "GET",
    success: function(data, textStatus, jqXHR) {
        // since we are using jQuery, you don't need to parse response
        searchable_fields = data.searchable_fields;
        console.log("aaa");
        for(var a =0;a<data.searchable_fields.length;a++){
            $("#query-table-row").append("<th>"+data.searchable_fields[a]+"</th>");
            $("#searchable-field").append('<option value="'+data.searchable_fields[a]+'">'+data.searchable_fields[a]+'</option>');
        }
        <!--drawTable(data);-->
    }
});
var data = [
            {
            id: 1,
            firstName: "Peter",
            lastName: "Jhons"},
        {
            id: 2,
            firstName: "David",
            lastName: "Bowie"}
        ];
function drawTable(data) {
    for (var i = 0; i < data.length; i++) {
        drawRow(data[i]);
    }
}

function drawRow(rowData) {
    var row = $("<tr />")
    $("#personDataTable").append(row);
    for(var a = 0;a<searchable_fields.length;a++){
    row.append($("<td>" + rowData[searchable_fields[a]] + "</td>"));
    }
}


<!--drawTable(data);-->
$("#search-btn").click(function(){
    var field = $("#searchable-field option:selected").val();
    var value = $("#search-value").val();
    var request_json = {
    "type" : "search",
    "key" : field,
    "value" : value
    };
    searchToMaster(request_json,null);
    console.log(JSON.stringify(request_json));
});

function searchToMaster(json_data, callback){
    $.ajax({
    url: 'http://localhost:8885/master/data/search/',
    type: "POST",
    datatype: "json",
    data: JSON.stringify(json_data),
    success: function(data, textStatus, jqXHR) {
        <!--console.log(JSON.stringify(data));-->
        drawTable(data.result);
    }
});
}



</script>

</body>
<script type="text/javascript">

</script>
</html>